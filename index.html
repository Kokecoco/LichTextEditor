<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>縦書きリッチテキストエディタ</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@material-ui/core@4.11.4/dist/material-ui.min.css">
    <link rel="stylesheet" href="https://cdn.ckeditor.com/ckeditor5/34.0.0/classic/themes/lark.css">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            margin: 20px;
        }
        .editor-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        #editor {
            width: 600px;
            height: 800px;
            border: 1px solid #ddd;
        }
        #toolbar {
            margin-bottom: 10px;
        }
        .ck-editor__editable {
            writing-mode: vertical-rl;
            text-orientation: upright;
            padding: 10px;
            font-size: 20px;
            line-height: 1.5;
            width: calc(100% - 25.6px);
        }
    </style>
</head>
<body>
    <div class="editor-container">
        <div id="toolbar">
            <button id="captureBtn" class="material-icons">camera_alt</button>
        </div>
        <div id="editor"></div>
    </div>
    <script src="https://cdn.ckeditor.com/ckeditor5/34.0.0/classic/ckeditor.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@material-ui/core@4.11.4/dist/material-ui.min.js"></script>
    <script src="https://unpkg.com/@material-ui/icons@4.11.2/index.js"></script>
    <script>
        ClassicEditor
            .create(document.querySelector('#editor'), {
                toolbar: [
                    'heading', '|', 
                    'bold', 'italic', 'underline', 'strikethrough', '|',
                    'fontSize', 'fontFamily', '|',
                    'fontColor', 'fontBackgroundColor', '|',
                    'link', 'bulletedList', 'numberedList', 'blockQuote', '|',
                    'undo', 'redo'
                ],
                fontSize: {
                    options: [
                        'tiny',
                        'default',
                        'big',
                        'huge'
                    ]
                },
                fontFamily: {
                    options: [
                        'default',
                        'Arial, Helvetica, sans-serif',
                        'Courier New, Courier, monospace',
                        'Georgia, serif',
                        'Lucida Sans Unicode, Lucida Grande, sans-serif',
                        'Tahoma, Geneva, sans-serif',
                        'Times New Roman, Times, serif',
                        'Trebuchet MS, Helvetica, sans-serif',
                        'Verdana, Geneva, sans-serif'
                    ]
                },
                language: 'ja'
            })
            .catch(error => {
                console.error(error);
            });

        document.getElementById('captureBtn').addEventListener('click', function() {
            domtoimage.toPng(document.querySelector('#editor'))
                .then(function(dataUrl) {
                    let link = document.createElement('a');
                    link.download = 'editor-content.png';
                    link.href = dataUrl;
                    link.click();
                })
                .catch(function(error) {
                    console.error('oops, something went wrong!', error);
                });
        });
    </script>
</body>
</html>
